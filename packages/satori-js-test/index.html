<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Satori JS Browser Test</title>
  </head>
  <body>
    <script src="../satori-js/dist/satori-js.iife.js"></script>

    <script>
      const client = new satorijs.Client("a63e9083-375c-4169-ad0b-dccb86bdb98b");
      const customid = "uniqueuser";
      var _session;

      client.authenticate(customid)
        .then(session => {
          _session = session;
          console.log("session", session);
          client.sessionRefresh(session).then((session) => console.log("session refreshed, new token: ", session.token));
          client.event(session, { name: "testEvent", value: "A value", metadata: { hello: "world" }}).then(() => console.log("sent event"));
          client.events(session, [
            { name: "sampleEventOne", value: "One", metadata: { meta: "data" }},
            { name: "sampleEventTwo", value: "Two", metadata: { data: "meta" }}
          ]).then(() => console.log("sent event"));
          client.updateProperties(session, { email: "hello@world.com" }, { customProperty1: "A value here" });
          client.listProperties(session).then((result) => console.log("properties:", result));
          client.getExperiments(session, []).then((result) => console.log("experiments: ", result));
          client.getFlags(session, []).then((result) => console.log("flags: ", result));
          client.getLiveEvents(session, []).then((result) => console.log("live events:", result));
          // client.identify(session, "anotheruser", { "email": "foo@bar.com" }, { "customProperty1": "aValue" })
          //   .then(newSession => console.log("got new session by calling identify", newSession))
          //   .catch(error => {
          //     console.log("got an error:", error);
          //   });
          //client.logout(session).then(() => console.log("logged out"));
        }).catch(error => {
          console.log(error);
        });
    </script>
  </body>
</html>
